workflows:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # ğŸ iOS Build Workflow
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ios-workflow:
    name: iOS Release Build
    max_build_duration: 60
    instance_type: mac_mini_m2
    
    environment:
      flutter: stable
      xcode: latest
      cocoapods: default
    
    scripts:
      # ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
      - name: Clean project
        script: |
          flutter clean
          
      # ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø²Ù…
      - name: Get Flutter packages
        script: |
          flutter pub get
          
      # ØªØ«Ø¨ÙŠØª CocoaPods
      - name: Install CocoaPods
        script: |
          cd ios && pod install
          
      # Ø¨Ù†Ø§Ø¡ iOS App
      - name: Build iOS App
        script: |
          flutter build ios --release --no-codesign
          
      # ØªØ­ÙˆÙŠÙ„ .app Ø¥Ù„Ù‰ .ipa
      - name: Create unsigned IPA
        script: |
          APP_PATH="build/ios/iphoneos/Runner.app"
          if [ -d "$APP_PATH" ]; then
            echo "Found Runner.app, creating IPA..."
            mkdir -p Payload
            cp -r "$APP_PATH" Payload/
            zip -r Runner-unsigned.ipa Payload
            rm -rf Payload
            echo "IPA created successfully!"
            ls -la Runner-unsigned.ipa
          else
            echo "ERROR: Runner.app not found!"
            exit 1
          fi
    
    artifacts:
      - Runner-unsigned.ipa
      - build/ios/iphoneos/Runner.app
    
    publishing:
      email:
        recipients:
          - vr85217468@gmail.com
        notify:
          success: true
          failure: true

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # ğŸ¤– Android Build Workflow
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  android-workflow:
    name: Android Release Build
    max_build_duration: 30
    instance_type: mac_mini_m2
    
    environment:
      flutter: stable
      java: 17
    
    scripts:
      - name: Clean project
        script: |
          flutter clean
          
      - name: Get Flutter packages
        script: |
          flutter pub get
          
      - name: Build Android APK
        script: |
          flutter build apk --release
          
      - name: Build Android App Bundle
        script: |
          flutter build appbundle --release
    
    artifacts:
      - build/app/outputs/flutter-apk/*.apk
      - build/app/outputs/bundle/release/*.aab
    
    publishing:
      email:
        recipients:
          - vr85217468@gmail.com   # ØºÙŠÙ‘Ø± Ù‡Ø°Ø§
        notify:
          success: true
          failure: true
